# 3.3 파트너 네트워크 연동 (선택사항)

{% hint style="info" %}
광고 수익 극대화를 위해 파트너 네트워크별 최적화 설정이 필요합니다.\
연동을 희망하시는 네트워크 목록을 사전에 전달해 주시면, 보다 정밀한 수익 최적화 세팅으로 맞춤형 세팅을 지원해 드립니다.
{% endhint %}

{% tabs %}
{% tab title="Android" %}
{% hint style="info" %}
애드몹 파트너 네트워크(Pangle, Vungle, AppLovin ...)&#x20;

&#x20;혹은

레벨플레이 파트너 네트워크를 연동하고 싶으실 경우,&#x20;

아래 연결된 링크를 통해 **\[미디에이션 SDK 환경 설정 빌더]** 페이지에 접속하십시오.
{% endhint %}

### **미디에이션 SDK 환경 설정 빌더 접속 링크**

이 빌더는 귀사가 선택한 네트워크에 맞춰 **필요한 모든 설정 코드를 자동으로 생성**합니다.&#x20;

생성된 코드를 해당 단계의 가이드에 따라 순서대로 복사 및 붙여넣기 하시면, **모든 프로젝트 초기 설정이 완료**됩니다.

* **애드몹 파트너 네트워크 연동 사용자를 위한 빌더 사용방법:**&#x20;
  * 링크 접속 > \[운영대행] 체크 > \[Admob] 선택 > 네트워크 선택&#x20;
  * 각 항목 복사 후 > 프로젝트 내 해당 항목들에 붙여넣기
* **레벨플레이 파트너 네트워크 연동 사용자를 위한 빌더 사용방법:**&#x20;
  * 링크 접속 > \[운영대행] 체크 > \[Unity(Levelplay)] 선택 > 네트워크 선택
  * 각 항목 복사 후 > 프로젝트 내 해당 항목들에 붙여넣기

**접속링크:** [https://image.cauly.co.kr/adwhale/sdk/guide/adwhale-mediation-guide-kr.html](https://image.cauly.co.kr/adwhale/sdk/guide/adwhale-mediation-guide-kr.html)
{% endtab %}

{% tab title="iOS" %}
### **iOS 애드몹 파트너 네트워크 연동 사용자를 위한 사용방법**

{% hint style="info" %}
애드몹 파트너 네트워크(Pangle, Vungle, AppLovin ...)를 연동하고 싶으실 경우,&#x20;

필요한 네트워크만 앱의 **Podfile**에서 설정하여 주십시오.&#x20;



1. **앱의 iOS 프로젝트**에서 `ios/Podfile`을 열기
2. `target 'Runner' do` 안, `flutter_install_all_ios_pods` 아래에 아래처럼 어댑터 pod를 추가
{% endhint %}

```ruby
# Podfile수정
target 'Runner' do
  use_frameworks!

  flutter_install_all_ios_pods File.dirname(File.realpath(__FILE__))

  # AdMob Mediation: 필요한 네트워크만 주석 해제하여 사용 (Google-Mobile-Ads-SDK ~> 12.x 호환)
  pod 'GoogleMobileAdsMediationUnity', '~> 4.16.3.0'
  pod 'GoogleMobileAdsMediationMoloco', '~> 4.1.0.0'
  pod 'GoogleMobileAdsMediationAppLovin', '~> 13.5.0.0'
  pod 'GoogleMobileAdsMediationInMobi', '~> 11.0.0.0'
  pod 'GoogleMobileAdsMediationVungle', '~> 7.6.1.0'
  pod 'GoogleMobileAdsMediationFyber', '~> 8.4.1.0'
  pod 'GoogleMobileAdsMediationMintegral', '~> 8.0.2.0'
  pod 'GoogleMobileAdsMediationPangle', '~> 7.7.0.6.0'
  pod 'GoogleMobileAdsMediationIronSource', '~> 9.1.0.0.0'

  target 'RunnerTests' do
    inherit! :search_paths
  end
end
```

{% hint style="info" %}
3. **InMobi 등 일부 어댑터**는 \*\*Other Linker Flags에 `-ObjC`\*\*가 필요합니다.\
   `pod install` 시 자동으로 Runner 타겟에 `-ObjC`를 넣으려면, Podfile 맨 아래 `post_install`에 다음을 추가
{% endhint %}

```ruby
post_install do |installer|
  installer.pods_project.targets.each do |target|
    flutter_additional_ios_build_settings(target)
  end

  # Mediation 어댑터 사용 시 필요: Runner 앱 타겟 Other Linker Flags에 -ObjC 추가
  runner_project_path = File.join(File.dirname(__FILE__), 'Runner.xcodeproj')
  if File.exist?(runner_project_path)
    require 'xcodeproj'
    project = Xcodeproj::Project.open(runner_project_path)
    project.native_targets.each do |target|
      if target.name == 'Runner'
        target.build_configurations.each do |config|
          flags = config.build_settings['OTHER_LDFLAGS'] || ['$(inherited)']
          flags = [flags] if flags.is_a?(String)
          config.build_settings['OTHER_LDFLAGS'] = (flags + ['-ObjC']).uniq
        end
        break
      end
    end
    project.save
  end
end
```

{% hint style="info" %}
4.  저장 후 터미널에서 실행

    ```
    cd ios
    rm -rf Pods Podfile.lock
    pod_install
    ```



5.  빌드/실행은 Runner.xcworkspace 를 열어서 합니다.

    ```
    Xcode에서: Product > Clean Build Folder > Run
    ```
{% endhint %}
{% endtab %}
{% endtabs %}

{% hint style="danger" %}
#### Android / iOS AdMob 버전 충돌 여부

**Android**

* AdMob(Play Services Ads) 버전은 **ADwhale Mediation SDK**가 내부적으로 사용하는 버전으로 결정됩니다.
* 이 Flutter 플러그인은 Android 쪽에 AdMob 의존성을 직접 추가하지 않으며, **ADwhale Mediation SDK** AAR 파일에 포함된 것만 사용합니다.
* **ADwhale Mediation SDK 가 사용하는 애드몹 버전: 24.3.0**<br>



**iOS**

* 이 플러그인은 iOS에서 **Google-Mobile-Ads-SDK**를 CocoaPods로 가져옵니다.
* **iOS 애드몹 버전: 12.12.0**



**버전 충돌**

* Android와 iOS는 **서로 다른 빌드 체인**을 쓰므로, “Android AdMob 버전”과 “iOS Google-Mobile-Ads-SDK 버전”이 달라도 **플러그인 자체에서는 충돌이 나지 않습니다**.
* iOS에서 앱이나 다른 플러그인(예: `google_mobile_ads`)도 같은 **Google-Mobile-Ads-SDK**를 쓰면, CocoaPods가 **한 가지 버전으로 통일**해서 링크합니다.
* 앱에서 특정 버전을 사용하고 있거나 고정하고 싶다면, 앱의 `ios/Podfile`에서 `Google-Mobile-Ads-SDK` 버전을 지정하면 되나, 지정 버전과 다른 버전 사용시 예기치 못한 동작 및 에러가 발생할 수 있으니 유의 부탁드립니다.
{% endhint %}
